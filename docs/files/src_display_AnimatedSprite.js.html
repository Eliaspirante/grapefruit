<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\display\AnimatedSprite.js - gf</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="gf"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/gf.AnimatedSprite.html">gf.AnimatedSprite</a></li>
            
                <li><a href="..&#x2F;classes/gf.AssetLoader.html">gf.AssetLoader</a></li>
            
                <li><a href="..&#x2F;classes/gf.AudioLoader.html">gf.AudioLoader</a></li>
            
                <li><a href="..&#x2F;classes/gf.AudioManager.html">gf.AudioManager</a></li>
            
                <li><a href="..&#x2F;classes/gf.AudoPlayer.html">gf.AudoPlayer</a></li>
            
                <li><a href="..&#x2F;classes/gf.Camera.html">gf.Camera</a></li>
            
                <li><a href="..&#x2F;classes/gf.Circle.html">gf.Circle</a></li>
            
                <li><a href="..&#x2F;classes/gf.Clock.html">gf.Clock</a></li>
            
                <li><a href="..&#x2F;classes/gf.DisplayObjectContainer.html">gf.DisplayObjectContainer</a></li>
            
                <li><a href="..&#x2F;classes/gf.Ellipse.html">gf.Ellipse</a></li>
            
                <li><a href="..&#x2F;classes/gf.EventEmitter.html">gf.EventEmitter</a></li>
            
                <li><a href="..&#x2F;classes/gf.Game.html">gf.Game</a></li>
            
                <li><a href="..&#x2F;classes/gf.GameState.html">gf.GameState</a></li>
            
                <li><a href="..&#x2F;classes/gf.Gui.html">gf.Gui</a></li>
            
                <li><a href="..&#x2F;classes/gf.GuiItem.html">gf.GuiItem</a></li>
            
                <li><a href="..&#x2F;classes/gf.ImageLayer.html">gf.ImageLayer</a></li>
            
                <li><a href="..&#x2F;classes/gf.input.Gamepad.html">gf.input.Gamepad</a></li>
            
                <li><a href="..&#x2F;classes/gf.input.GamepadButtons.html">gf.input.GamepadButtons</a></li>
            
                <li><a href="..&#x2F;classes/gf.input.GamepadSticks.html">gf.input.GamepadSticks</a></li>
            
                <li><a href="..&#x2F;classes/gf.input.Input.html">gf.input.Input</a></li>
            
                <li><a href="..&#x2F;classes/gf.input.Keyboard.html">gf.input.Keyboard</a></li>
            
                <li><a href="..&#x2F;classes/gf.InputManager.html">gf.InputManager</a></li>
            
                <li><a href="..&#x2F;classes/gf.JsonLoader.html">gf.JsonLoader</a></li>
            
                <li><a href="..&#x2F;classes/gf.Layer.html">gf.Layer</a></li>
            
                <li><a href="..&#x2F;classes/gf.Loader.html">gf.Loader</a></li>
            
                <li><a href="..&#x2F;classes/gf.Map.html">gf.Map</a></li>
            
                <li><a href="..&#x2F;classes/gf.math.html">gf.math</a></li>
            
                <li><a href="..&#x2F;classes/gf.ObjectPool.html">gf.ObjectPool</a></li>
            
                <li><a href="..&#x2F;classes/gf.plugin.html">gf.plugin</a></li>
            
                <li><a href="..&#x2F;classes/gf.Point.html">gf.Point</a></li>
            
                <li><a href="..&#x2F;classes/gf.Polygon.html">gf.Polygon</a></li>
            
                <li><a href="..&#x2F;classes/gf.Rectangle.html">gf.Rectangle</a></li>
            
                <li><a href="..&#x2F;classes/gf.Sprite.html">gf.Sprite</a></li>
            
                <li><a href="..&#x2F;classes/gf.SpritePool.html">gf.SpritePool</a></li>
            
                <li><a href="..&#x2F;classes/gf.support.html">gf.support</a></li>
            
                <li><a href="..&#x2F;classes/gf.Texture.html">gf.Texture</a></li>
            
                <li><a href="..&#x2F;classes/gf.TextureFont.html">gf.TextureFont</a></li>
            
                <li><a href="..&#x2F;classes/gf.TextureLoader.html">gf.TextureLoader</a></li>
            
                <li><a href="..&#x2F;classes/gf.Tile.html">gf.Tile</a></li>
            
                <li><a href="..&#x2F;classes/gf.TiledLayer.html">gf.TiledLayer</a></li>
            
                <li><a href="..&#x2F;classes/gf.TiledMap.html">gf.TiledMap</a></li>
            
                <li><a href="..&#x2F;classes/gf.TiledObjectGroup.html">gf.TiledObjectGroup</a></li>
            
                <li><a href="..&#x2F;classes/gf.TiledTileset.html">gf.TiledTileset</a></li>
            
                <li><a href="..&#x2F;classes/gf.utils.html">gf.utils</a></li>
            
                <li><a href="..&#x2F;classes/gf.Vector.html">gf.Vector</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\display\AnimatedSprite.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * The base AnimatedSprite class
 *
 * @class AnimatedSprite
 * @extends gf.Sprite
 * @namespace gf
 * @constructor
 * @param animations {Object} An object of the form &#x60;{ animationName: [frame1, frame2] }&#x60; or you can also specify overrides on a per-animation basis:
 *      &#x60;{ animationName: { frames: [frame1, frame2], speed: 2 } }&#x60;. Each frame is a Texture object
 * @param [speed] {Number} The speed of the animations (can be overriden on a specific animations)
 * @param [start] {String} The animation to start with, defaults to the first found key otherwise
 *&#x2F;
gf.AnimatedSprite = function(anims, speed, start) {
    &#x2F;&#x2F;massage animations into full format
    for(var a in anims) {
        if(start === undefined)
            start = a;

        var anim = anims[a];

        if(anim instanceof Array)
            anims[a] = { frames: anim };
    }

    gf.Sprite.call(this, anims[start].frames[0]);

    &#x2F;**
     * The animation speed for this sprite
     *
     * @property speed
     * @type Number
     * @default 1
     *&#x2F;
    this.speed = speed || 1;

    &#x2F;**
     * Whether or not to loop the animations. This can be overriden
     * on a per-animation level
     *
     * @property loop
     * @type Boolean
     * @default false
     *&#x2F;
    this.loop = false;

    &#x2F;**
     * The registerd animations for this AnimatedSprite
     *
     * @property animations
     * @type Object
     * @readOnly
     *&#x2F;
    this.animations = anims;

    &#x2F;**
     * The currently playing animation
     *
     * @property currentAnimation
     * @type String
     * @readOnly
     *&#x2F;
    this.currentAnimation = start;

    &#x2F;**
     * The current frame being shown
     *
     * @property currentFrame
     * @type Number
     * @readOnly
     *&#x2F;
    this.currentFrame = 0;

    &#x2F;**
     * Whether or not the animation is currently playing
     *
     * @property playing
     * @type Boolean
     * @readOnly
     *&#x2F;
    this.playing = false;
};

gf.inherits(gf.AnimatedSprite, gf.Sprite, {
    &#x2F;**
     * Adds a new animation to this animated sprite
     *
     * @method addAnimation
     * @param name {String} The string name of the animation
     * @param frames {Array&lt;Texture&gt;} The array of texture frames
     * @param [speed] {Number} The animation speed
     * @param [loop] {Boolean} Loop the animation or not
     *&#x2F;
    addAnimation: function(name, frames, speed, loop) {
        if(typeof name === &#x27;object&#x27;) {
            this.animations[name.name] = name;
        } else {
            this.animations[name] = {
                name: name,
                frames: frames,
                speed: speed,
                loop: loop
            };
        }
    },
    &#x2F;**
     * Goes to a frame and starts playing the animation from there
     *
     * @method gotoAndPlay
     * @param [name] {String} The string name of the animation to play
     * @param frame {Number} The index of the frame to start on
     *&#x2F;
    gotoAndPlay: function(anim, frame) {
        if(typeof anim === &#x27;number&#x27;) {
            this.currenFrame = anim;
        } else {
            this.currenFrame = frame || 0;
            this.currentAnimation = anim;
        }

        this.playing = true;
    },
    &#x2F;**
     * Goes to a frame and stops playing the animation
     *
     * @method gotoAndStop
     * @param [name] {String} The string name of the animation to go to
     * @param frame {Number} The index of the frame to stop on
     *&#x2F;
    gotoAndStop: function(anim, frame) {
        if(typeof anim === &#x27;number&#x27;) {
            this.currentFrame = anim;
        } else {
            this.currentFrame = frame || 0;
            this.currentAnimation = anim;
        }

        this.setTexture(this.animations[this.currentAnimation].frames[this.currentFrame]);
        this.playing = false;
    },
    &#x2F;**
     * Starts playing the currently active animation
     *
     * @method play
     *&#x2F;
    play: function() {
        this.playing = true;
    },
    &#x2F;**
     * Stops playing the currently active animation
     *
     * @method stop
     *&#x2F;
    stop: function() {
        this.playing = false;
    },
    &#x2F;**
     * Called by PIXI to update our textures and do the actual animation
     *
     * @method updateTransform
     * @private
     *&#x2F;
    updateTransform: function() {
        gf.Sprite.prototype.updateTransform.call(this);

        if(!this.playing) return;

        var anim = this.animations[this.currentAnimation],
            round,
            loop = anim.loop !== undefined ? anim.loop : this.loop;

        this.currentFrame += anim.speed || this.speed;
        round = gf.math.round(this.currentFrame);

        if(round &lt; anim.frames.length) {
            this.setTexture(anim.frames[round]);
        }
        else {
            if(loop) {
                this.gotoAndPlay(0);
            } else {
                this.stop();
                this.emit(&#x27;complete&#x27;, this.currentAnimation);
            }
        }
    }
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
